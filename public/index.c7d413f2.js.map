{"mappings":"kBACMA,EAASC,KACTC,EAASC,SAASC,cAAc,WAIhCC,EAAMH,EAAOI,WAAW,MAE9BN,EAAOO,GAAG,aAAcC,IACpBC,OAAOC,MAAQF,KAGnBR,EAAOO,GAAG,YAAaC,IACbA,IACFC,OAAOC,MAAMC,WAAaH,MAIlCN,EAAOU,iBAAiB,SAAS,SAAUJ,OACnCK,EAAOX,EAAOY,wBAClBd,EAAOe,KAAK,OAAA,CACRC,EAAGC,KAAKC,MAAMV,EAAKW,QAAUN,EAAKO,MAClCC,EAAGJ,KAAKC,MAAMV,EAAKc,QAAUT,EAAKU,UAqB1CC,aAjBqBC,UACjBpB,EAAIqB,UAAU,EAAG,EAAGxB,EAAOyB,MAAOzB,EAAO0B,QAEzC1B,EAAO2B,MAAMC,gBAAAA,OAAyBrB,OAAOC,MAAMC,oBAE7CoB,EAAUtB,OAAOC,MAAMqB,YACxBC,YAAYD,EAAAA,OACPE,EAASF,EAAQC,UAClBC,EAAOjB,GAAMiB,EAAOZ,IAGzBhB,EAAI6B,UAAYD,EAAOE,OACvB9B,EAAI+B,SAASH,EAAOjB,EAAGiB,EAAOZ,EAAG,EAAG,OAKjB,IAAK,KAGhCZ,OAAO4B,OAAUC,IACbtC,EAAOe,KAAK,eAAgBuB,IAGhC7B,OAAO8B,KAAQP,IACXvB,OAAOC,MAAMqB,QAAQC,GAErBvB,OAAO+B,UACFC,MAAAA,CACGC,GAAI,IACJC,KAAM,EACNC,SAAU,MAEjBC,OAAOC,IACJrC,OAAOC,MAAMqB,QAAQC,GAAUhB,EAAI8B","sources":["./scripts/app.js"],"sourcesContent":["\nconst socket = io();\nconst canvas = document.querySelector('#canvas');\n/**\n * @type {CanvasRenderingContext2D} ctx\n */\nconst ctx = canvas.getContext('2d');\n\nsocket.on('fullState', (data) => {\n    window.state = data;\n});\n\nsocket.on('setImage', (data) => {\n    if (!!data) {\n        window.state.background = data;\n    }\n})\n\ncanvas.addEventListener('click', function (data) {\n    let rect = canvas.getBoundingClientRect();\n    socket.emit('move', {\n        x: Math.floor(data.clientX - rect.left),\n        y: Math.floor(data.clientY - rect.top),\n    });\n});\n\nconst refreshBoard = async () => {\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    canvas.style.backgroundImage = `url(${window.state.background})`;\n    \n    const players = window.state.players;\n    for (playerId in players) {\n        const player = players[playerId];\n        if (!player.x || !player.y) {\n            continue;\n        }\n        ctx.fillStyle = player.colour;\n        ctx.fillRect(player.x, player.y, 5, 5);\n    }\n}\n\n// Game loop at 144 fps\nsetInterval(refreshBoard, (1000/144))\n\n// Move this into admin protected route\nwindow.setImg = (url) => {\n    socket.emit('requestImage', url)\n}\n\nwindow.yerd = (playerId) => {\n    window.state.players[playerId];\n\n    window.popmotion\n        .tween({\n            to: 600,\n            from: 0,\n            duration: 1000,\n        })\n    .start((v) => {\n        window.state.players[playerId].x = v;\n    });\n}"],"names":["$e92fc9351869c721a5821fdbfc389fc0$var$socket","io","$e92fc9351869c721a5821fdbfc389fc0$var$canvas","document","querySelector","$e92fc9351869c721a5821fdbfc389fc0$var$ctx","getContext","on","data","window","state","background","addEventListener","rect","getBoundingClientRect","emit","x","Math","floor","clientX","left","y","clientY","top","setInterval","async","clearRect","width","height","style","backgroundImage","players","playerId","player","fillStyle","colour","fillRect","setImg","url","yerd","popmotion","tween","to","from","duration","start","v"],"version":3,"file":"index.c7d413f2.js.map"}